import{r as u,_ as R,$ as P,j as s,K as A,b as F,q as N,G as b,m as o,l as D,L as n,ah as V,W as E,aj as O,ak as L}from"./index-D4ilnrIg.js";import{r as p}from"./reviewService-D6o2sSg9.js";import{o as T}from"./orderService-BTvih5gT.js";import{b as C}from"./blogService-C4FcVD8p.js";const W=()=>{var j,g;const[a,y]=u.useState({analytics:null,orders:{total:0,pending:0,revenue:0},reviews:{total:0,pending:0,avgRating:0},blog:{total:0,published:0,drafts:0}});u.useEffect(()=>{f()},[]);const f=()=>{const e=R(),c=P(),r=T.getAllOrders(),t=r.filter(i=>i.status==="pending"),h=r.filter(i=>i.status==="completed").reduce((i,v)=>i+(v.totalAmount||0),0),l=p.getAllReviews(),k=p.getPendingReviews(),w=l.length>0?l.reduce((i,v)=>i+v.rating,0)/l.length:0,m=C.getAllPosts(),q=m.filter(i=>i.status==="published"),S=m.filter(i=>i.status==="draft");y({analytics:e,analyticsDetails:c,orders:{total:r.length,pending:t.length,revenue:h},reviews:{total:l.length,pending:k.length,avgRating:w.toFixed(1)},blog:{total:m.length,published:q.length,drafts:S.length}})},d=({icon:e,title:c,value:r,change:t,color:h,link:l})=>s.jsx(o.div,{className:"stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},children:s.jsxs(n,{to:l,className:"stat-card-link",children:[s.jsx("div",{className:"stat-icon",style:{background:h},children:e}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-title",children:c}),s.jsx("div",{className:"stat-value",children:r}),t&&s.jsxs("div",{className:`stat-change ${t>=0?"positive":"negative"}`,children:[t>=0?s.jsx(O,{}):s.jsx(L,{}),Math.abs(t),"%"]})]})]})}),x=()=>{var e;return(e=a.analyticsDetails)!=null&&e.pageViews?a.analyticsDetails.pageViews.slice(-5).reverse():[]};return s.jsxs("div",{className:"admin-dashboard",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsx("h2",{children:"Dashboard Overview"}),s.jsx("p",{children:"Welcome back! Here's what's happening with your site."})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsx(d,{icon:s.jsx(A,{}),title:"Page Views",value:((j=a.analytics)==null?void 0:j.totalPageViews.toLocaleString())||"0",color:"linear-gradient(135deg, #667eea, #764ba2)",link:"/admin/analytics"}),s.jsx(d,{icon:s.jsx(F,{}),title:"Unique Visitors",value:((g=a.analytics)==null?void 0:g.uniqueVisitors.toLocaleString())||"0",color:"linear-gradient(135deg, #f093fb, #f5576c)",link:"/admin/analytics"}),s.jsx(d,{icon:s.jsx(N,{}),title:"Total Orders",value:a.orders.total,color:"linear-gradient(135deg, #4facfe, #00f2fe)",link:"/admin/orders"}),s.jsx(d,{icon:s.jsx(b,{}),title:"Avg Rating",value:`${a.reviews.avgRating} ⭐`,color:"linear-gradient(135deg, #43e97b, #38f9d7)",link:"/admin/reviews"})]}),s.jsxs("div",{className:"quick-stats",children:[s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Pending Orders"}),s.jsx("div",{className:"quick-stat-value",children:a.orders.pending})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Pending Reviews"}),s.jsx("div",{className:"quick-stat-value",children:a.reviews.pending})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Published Posts"}),s.jsx("div",{className:"quick-stat-value",children:a.blog.published})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Draft Posts"}),s.jsx("div",{className:"quick-stat-value",children:a.blog.drafts})]})]}),s.jsxs("div",{className:"dashboard-content-grid",children:[s.jsxs(o.div,{className:"dashboard-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h3",{children:[s.jsx(D,{})," Recent Traffic"]}),s.jsx(n,{to:"/admin/analytics",className:"view-all-link",children:"View All"})]}),s.jsx("div",{className:"recent-traffic-list",children:x().length>0?x().map((e,c)=>s.jsxs("div",{className:"traffic-item",children:[s.jsxs("div",{className:"traffic-info",children:[s.jsx("div",{className:"traffic-page",children:e.path==="/"?"Home":e.path}),s.jsxs("div",{className:"traffic-meta",children:[e.device," • ",e.browser," • ",new Date(e.timestamp).toLocaleTimeString()]})]}),s.jsx("div",{className:"traffic-source",children:e.source})]},c)):s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"No traffic data yet"})})})]}),s.jsxs(o.div,{className:"dashboard-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{children:"Quick Actions"})}),s.jsxs("div",{className:"quick-links",children:[s.jsxs(n,{to:"/admin/blog",className:"quick-link-btn",children:[s.jsx(V,{}),s.jsx("span",{children:"Create Blog Post"})]}),s.jsxs(n,{to:"/admin/reviews",className:"quick-link-btn",children:[s.jsx(b,{}),s.jsx("span",{children:"Moderate Reviews"})]}),s.jsxs(n,{to:"/admin/orders",className:"quick-link-btn",children:[s.jsx(N,{}),s.jsx("span",{children:"View Orders"})]}),s.jsxs(n,{to:"/admin/newsletter",className:"quick-link-btn",children:[s.jsx(E,{}),s.jsx("span",{children:"Send Newsletter"})]})]})]}),s.jsxs(o.div,{className:"dashboard-card full-width",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{children:"Website Statistics"})}),s.jsx("div",{className:"website-stats-grid",children:a.analytics&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Total Sessions"}),s.jsx("div",{className:"stat-number",children:a.analytics.totalSessions})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Bounce Rate"}),s.jsxs("div",{className:"stat-number",children:[a.analytics.bounceRate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Avg. Session Time"}),s.jsxs("div",{className:"stat-number",children:[Math.round(a.analytics.avgSessionDuration/1e3/60),"m"]})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Total Events"}),s.jsx("div",{className:"stat-number",children:a.analytics.totalEvents})]})]})})]})]})]})};export{W as default};
