const d="eflash_orders",s={createOrder:t=>{const e={id:`ORD-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...t,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};(async()=>{try{await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.log("Backend unavailable, saving locally:",n)}})();const r=s.getAllOrders();return r.push(e),localStorage.setItem(d,JSON.stringify(r)),e},getAllOrders:()=>{const t=localStorage.getItem(d);return t?JSON.parse(t):[]},getOrderById:t=>s.getAllOrders().find(r=>r.id===t),getUserOrders:t=>s.getAllOrders().filter(r=>r.customerEmail===t),updateOrderStatus:(t,e)=>{const r=s.getAllOrders(),n=r.findIndex(a=>a.id===t);return n!==-1?(r[n].status=e,r[n].updatedAt=new Date().toISOString(),localStorage.setItem(d,JSON.stringify(r)),(async()=>{try{await fetch(`/api/orders/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})}catch(a){console.log("Backend sync failed:",a)}})(),r[n]):null},cancelOrder:(t,e)=>s.updateOrderStatus(t,"cancelled"),getOrderStats:()=>{const t=s.getAllOrders();return{total:t.length,pending:t.filter(e=>e.status==="pending").length,confirmed:t.filter(e=>e.status==="confirmed").length,shipped:t.filter(e=>e.status==="shipped").length,delivered:t.filter(e=>e.status==="delivered").length,cancelled:t.filter(e=>e.status==="cancelled").length,totalRevenue:t.filter(e=>e.status==="delivered").reduce((e,r)=>e+(r.totalAmount||0),0)}}},o=s.getAllOrders,l=s.updateOrderStatus,i=s.getOrderStats;export{i as a,o as g,s as o,l as u};
