import{r as o,aH as v,j as e,aI as B,a3 as F,m as C,K as f,aJ as K,aA as J,aE as re,a4 as ne}from"./index-qbtj3E5d.js";/* empty css                       *//* empty css                  */const $="portfolioCategories",he=()=>{const[I,A]=o.useState([]),[y,u]=o.useState(!0),[T,g]=o.useState(""),[p,U]=o.useState(()=>{try{const s=localStorage.getItem($);return s?JSON.parse(s):["Web Design","Branding","UI/UX","Graphic Design"]}catch{return["Web Design","Branding","UI/UX","Graphic Design"]}}),[G,H]=o.useState(!1),[E,R]=o.useState("");o.useEffect(()=>{localStorage.setItem($,JSON.stringify(p))},[p]);const M=()=>{const s=E.trim();!s||p.includes(s)||(U(t=>[...t,s]),R(""))},V=s=>{U(t=>t.filter(l=>l!==s))};o.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0),g("");const s=await v.getAllProjects();A(s)}catch(s){console.error("Error loading projects:",s),g("Failed to load projects. Using offline mode.");const t=v.getFallbackProjects();A(t)}finally{u(!1)}},[b,w]=o.useState(!1),[c,d]=o.useState(null),_={title:"",description:"",category:"Web Design",tags:[],technologies:[],liveUrl:"",thumbnail:"",images:[],features:[],clientName:"",projectDate:"",duration:"",challenge:"",solution:"",result:"",stats:{users:"",pages:"",performance:"",completion:""}},[h,m]=o.useState(_),X=["React","Vue","Angular","WordPress","Shopify","HTML","CSS","JavaScript","Node.js","Python","Tailwind","Bootstrap","MongoDB","MySQL","Firebase"],q=async()=>{var s;if(!(!h.title||!h.description))try{u(!0),g("");const t={...h,tags:h.tags.filter(n=>n.trim()),technologies:h.technologies.filter(n=>n.trim()),features:h.features.filter(n=>n.trim()),thumbnail:h.thumbnail||((s=h.images)==null?void 0:s[0])||""},l=await v.addProject(t);await N(),m(_),w(!1)}catch(t){console.error("Error adding project:",t),g("Failed to add project. Please try again.")}finally{u(!1)}},z=s=>{d({...s})},Q=async()=>{var s;if(c)try{u(!0),g("");const t=c._id||c.id,l={...c,thumbnail:c.thumbnail||((s=c.images)==null?void 0:s[0])||""};await v.updateProject(t,l),await N(),d(null)}catch(t){console.error("Error updating project:",t),g("Failed to update project. Please try again.")}finally{u(!1)}},Y=async s=>{if(window.confirm("Are you sure you want to delete this project?"))try{u(!0),g(""),await v.deleteProject(s),await N()}catch(t){console.error("Error deleting project:",t),g("Failed to delete project. Please try again.")}finally{u(!1)}},Z=(s,t=!1)=>{Array.from(s.target.files).forEach(n=>{const i=new FileReader;i.onloadend=()=>{t?d(j=>({...j,images:[...j.images,i.result]})):m(j=>({...j,images:[...j.images,i.result]}))},i.readAsDataURL(n)})},L=(s,t=!1)=>{s.trim()&&(t?c.tags.includes(s)||d(l=>({...l,tags:[...l.tags,s]})):h.tags.includes(s)||m(l=>({...l,tags:[...l.tags,s]})))},ee=(s=!1)=>{s?d(t=>({...t,features:[...t.features||[],""]})):m(t=>({...t,features:[...t.features||[],""]}))},se=(s,t,l=!1)=>{l?d(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}}):m(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}})},ae=(s,t=!1)=>{t?d(l=>({...l,features:l.features.filter((n,i)=>i!==s)})):m(l=>({...l,features:l.features.filter((n,i)=>i!==s)}))},te=(s,t=!1)=>{t?d(l=>({...l,tags:l.tags.filter(n=>n!==s)})):m(l=>({...l,tags:l.tags.filter(n=>n!==s)}))},[P,S]=o.useState(""),[k,D]=o.useState(""),W=(s,t,l=!1)=>{var n,i,j,O;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-section-title",children:"Card Information (shown on portfolio grid)"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>t({...s,title:a.target.value}),placeholder:"Enter project title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",value:s.category||"",onChange:a=>t({...s,category:a.target.value}),placeholder:"Type or pick a category below…"}),p.length>0&&e.jsx("div",{className:"category-chips",children:p.map(a=>e.jsx("button",{type:"button",className:`category-chip${s.category===a?" active":""}`,onClick:()=>t({...s,category:a}),children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Client Name"}),e.jsx("input",{type:"text",value:s.clientName||"",onChange:a=>t(r=>({...r,clientName:a.target.value})),placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Date"}),e.jsx("input",{type:"month",value:s.projectDate||"",onChange:a=>t(r=>({...r,projectDate:a.target.value}))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Short Description * (shown on card)"}),e.jsx("textarea",{value:s.description,onChange:a=>t(r=>({...r,description:a.target.value})),placeholder:"Brief description shown on the portfolio card",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Live URL (optional)"}),e.jsx("input",{type:"url",value:s.liveUrl||"",onChange:a=>t(r=>({...r,liveUrl:a.target.value})),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Duration"}),e.jsx("input",{type:"text",value:s.duration||"",onChange:a=>t(r=>({...r,duration:a.target.value})),placeholder:"e.g. 4 weeks"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Card Tags"}),e.jsxs("div",{className:"tag-input-row",children:[e.jsx("input",{type:"text",value:l?k:P,onChange:a=>l?D(a.target.value):S(a.target.value),onKeyDown:a=>{(a.key==="Enter"||a.key===",")&&(a.preventDefault(),L(l?k:P,l),l?D(""):S(""))},placeholder:"Type tag and press Enter"}),e.jsx("button",{type:"button",className:"btn-add-tag",onClick:()=>{L(l?k:P,l),l?D(""):S("")},children:"Add"})]}),e.jsx("div",{className:"tags-list",children:(s.tags||[]).map(a=>e.jsxs("span",{className:"tag-chip",children:[a,e.jsx("button",{type:"button",onClick:()=>te(a,l),children:e.jsx(f,{})})]},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Project Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:a=>Z(a,l)}),(s.images||[]).length>0&&e.jsx("div",{className:"image-preview-grid",children:(s.images||[]).map((a,r)=>e.jsxs("div",{className:"image-preview-item",children:[e.jsx("img",{src:a,alt:`Preview ${r}`}),e.jsx("button",{type:"button",className:"remove-img-btn",onClick:()=>{t(x=>({...x,images:x.images.filter((ie,le)=>le!==r)}))},children:e.jsx(f,{})})]},r))})]})]}),e.jsx("div",{className:"form-section-title popup-section-title",children:'Popup Details (shown when "View Details" is clicked)'}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Technologies Used"}),e.jsx("div",{className:"tech-selector",children:X.map(a=>e.jsx("button",{type:"button",className:`tech-option ${(s.technologies||[]).includes(a)?"selected":""}`,onClick:()=>{const r=s.technologies||[];t({...s,technologies:r.includes(a)?r.filter(x=>x!==a):[...r,a]})},children:a},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Challenge"}),e.jsx("textarea",{value:s.challenge||"",onChange:a=>t(r=>({...r,challenge:a.target.value})),placeholder:"What was the challenge or problem this project solved?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Solution"}),e.jsx("textarea",{value:s.solution||"",onChange:a=>t(r=>({...r,solution:a.target.value})),placeholder:"How did you solve it? What approach was taken?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Result"}),e.jsx("textarea",{value:s.result||"",onChange:a=>t(r=>({...r,result:a.target.value})),placeholder:"What were the outcomes or measurable results?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Key Features / Deliverables"}),(s.features||[]).map((a,r)=>e.jsxs("div",{className:"feature-input-row",children:[e.jsx("input",{type:"text",value:a,onChange:x=>se(r,x.target.value,l),placeholder:`Feature ${r+1}`}),e.jsx("button",{type:"button",className:"btn-remove-feature",onClick:()=>ae(r,l),children:e.jsx(f,{})})]},r)),e.jsxs("button",{type:"button",className:"btn-add-feature",onClick:()=>ee(l),children:[e.jsx(F,{})," Add Feature"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Users / Reach"}),e.jsx("input",{type:"text",value:((n=s.stats)==null?void 0:n.users)||"",onChange:a=>t(r=>({...r,stats:{...r.stats,users:a.target.value}})),placeholder:"e.g. 500+ users"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Pages / Screens"}),e.jsx("input",{type:"text",value:((i=s.stats)==null?void 0:i.pages)||"",onChange:a=>t(r=>({...r,stats:{...r.stats,pages:a.target.value}})),placeholder:"e.g. 12 pages"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Performance Score"}),e.jsx("input",{type:"text",value:((j=s.stats)==null?void 0:j.performance)||"",onChange:a=>t(r=>({...r,stats:{...r.stats,performance:a.target.value}})),placeholder:"e.g. 98/100"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Completion / ROI"}),e.jsx("input",{type:"text",value:((O=s.stats)==null?void 0:O.completion)||"",onChange:a=>t(r=>({...r,stats:{...r.stats,completion:a.target.value}})),placeholder:"e.g. On time"})]})]})]})};return e.jsxs("div",{className:"manage-projects admin-page admin-content",children:[e.jsxs("div",{className:"projects-header",children:[e.jsx("h1",{children:"Manage Projects"}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"manage-categories-btn",onClick:()=>H(s=>!s),children:[e.jsx(B,{}),"Manage Categories"]}),!b&&e.jsxs("button",{className:"add-project-btn",onClick:()=>w(!0),children:[e.jsx(F,{}),"Add New Project"]})]})]}),G&&e.jsxs(C.div,{className:"category-manager-panel",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsxs("h3",{children:[e.jsx(B,{})," Portfolio Categories"]}),e.jsx("p",{className:"category-manager-hint",children:"These categories appear as quick-pick chips when adding or editing a project."}),e.jsxs("div",{className:"category-manager-input-row",children:[e.jsx("input",{type:"text",value:E,onChange:s=>R(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),M())},placeholder:"New category name…"}),e.jsxs("button",{type:"button",className:"btn-add-category",onClick:M,children:[e.jsx(F,{})," Add"]})]}),e.jsxs("div",{className:"category-manager-list",children:[p.length===0&&e.jsx("span",{className:"no-categories",children:"No categories yet."}),p.map(s=>e.jsxs("span",{className:"category-manager-chip",children:[s,e.jsx("button",{type:"button",onClick:()=>V(s),title:"Remove",children:e.jsx(f,{})})]},s))]})]}),T&&e.jsx("div",{className:"error-banner",children:T}),y&&e.jsx("div",{className:"loading-banner",children:"Saving..."}),b&&e.jsxs(C.div,{className:"project-form-card",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Add New Project"}),W(h,m,!1),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>w(!1),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:q,className:"btn-save",disabled:y,children:[e.jsx(K,{})," Add Project"]})]})]}),c&&e.jsx(C.div,{className:"project-form-card edit-modal-overlay",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"edit-modal-inner",children:[e.jsxs("h3",{children:["Edit Project: ",c.title]}),W(c,d,!0),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>d(null),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:Q,className:"btn-save",disabled:y,children:[e.jsx(K,{})," Save Changes"]})]})]})}),!b&&!c&&e.jsx("div",{className:"projects-grid",children:I.map(s=>{var t,l;return e.jsxs(C.div,{className:"project-card",layout:!0,children:[e.jsx("div",{className:"project-thumbnail",children:(t=s.images)!=null&&t[0]||s.thumbnail?e.jsx("img",{src:((l=s.images)==null?void 0:l[0])||s.thumbnail,alt:s.title}):e.jsxs("div",{className:"no-image",children:[e.jsx(J,{}),e.jsx("span",{children:"No Image"})]})}),e.jsxs("div",{className:"project-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"project-category",children:s.category}),s.clientName&&e.jsxs("p",{className:"project-client",children:["Client: ",s.clientName]}),e.jsx("p",{className:"project-description",children:s.description}),s.technologies&&s.technologies.length>0&&e.jsxs("div",{className:"tech-tags",children:[s.technologies.slice(0,3).map(n=>e.jsx("span",{className:"tech-tag",children:n},n)),s.technologies.length>3&&e.jsxs("span",{className:"tech-more",children:["+",s.technologies.length-3]})]}),s.liveUrl&&e.jsx("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"live-link",children:"View Live Site"})]}),e.jsxs("div",{className:"project-actions",children:[e.jsx("button",{onClick:()=>z(s),className:"btn-edit",title:"Edit",children:e.jsx(re,{})}),e.jsx("button",{onClick:()=>Y(s._id||s.id),className:"btn-delete",title:"Delete",children:e.jsx(ne,{})})]})]},s._id||s.id)})}),I.length===0&&!b&&!y&&e.jsxs("div",{className:"no-projects",children:[e.jsx(J,{size:48}),e.jsx("h3",{children:"No projects yet"}),e.jsx("p",{children:'Click "Add New Project" to add your first project'})]})]})};export{he as default};
