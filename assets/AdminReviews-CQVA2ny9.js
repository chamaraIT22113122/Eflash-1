import{r as c,j as e,V as v,Z as N,W as j,az as L,aA as P,O as Z,S as q,J as $,m as T,ap as G,a8 as Q,aB as X,aC as Y,K as M,aD as O,a2 as U}from"./index-DVvEjCP_.js";import{g as H,m as ee,a as se,b as ae,d as te}from"./reviewService-93UpU-qv.js";/* empty css                  */const ce=()=>{const[o,V]=c.useState([]),[i,u]=c.useState("pending"),[g,f]=c.useState(!0),[p,B]=c.useState(""),[a,w]=c.useState(null),[_,b]=c.useState(!1),[l,m]=c.useState(null),[C,z]=c.useState("newest");c.useEffect(()=>{h()},[]);const h=()=>{f(!0);const s=H();V(s),f(!1)},y=s=>{ae(s)&&h()},R=s=>{window.confirm("Are you sure you want to delete this review? This action cannot be undone.")&&te(s)&&(h(),a&&a.id===s&&x())},S=s=>{m({...s})},J=()=>{const t=H().map(n=>n.id===l.id?l:n);localStorage.setItem("eflash_reviews",JSON.stringify(t)),m(null),h()},W=()=>{m(null)},k=s=>{w(s),b(!0),document.body.style.overflow="hidden"},x=()=>{w(null),b(!1),document.body.style.overflow=""},I=s=>{ee(s,"admin"),h()},K=s=>{se(s,"admin"),h()},A=o.filter(s=>i==="all"?!0:i==="pending"?!s.approved:i==="approved"?s.approved:!0).filter(s=>{var n,d,E,D;if(!p)return!0;const t=p.toLowerCase();return((n=s.authorName)==null?void 0:n.toLowerCase().includes(t))||((d=s.title)==null?void 0:d.toLowerCase().includes(t))||((E=s.content)==null?void 0:E.toLowerCase().includes(t))||((D=s.authorEmail)==null?void 0:D.toLowerCase().includes(t))}).sort((s,t)=>{switch(C){case"newest":return new Date(t.createdAt)-new Date(s.createdAt);case"oldest":return new Date(s.createdAt)-new Date(t.createdAt);case"rating-high":return t.rating-s.rating;case"rating-low":return s.rating-t.rating;default:return 0}});o.filter(s=>i==="all"?!0:i==="pending"?!s.approved:i==="approved"?s.approved:!0);const r={total:o.length,pending:o.filter(s=>!s.approved).length,approved:o.filter(s=>s.approved).length,withPhotos:o.filter(s=>s.photos&&s.photos.length>0).length,highRated:o.filter(s=>s.rating>=4).length},F=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g?e.jsxs("div",{className:"admin-reviews-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading reviews..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-reviews admin-page admin-content",children:[e.jsxs("div",{className:"admin-reviews-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Review Management"}),e.jsx("p",{children:"Moderate, edit, and manage customer reviews"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"refresh-btn",onClick:h,disabled:g,children:"Refresh"})})]}),e.jsxs("div",{className:"review-stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(v,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:r.total}),e.jsx("span",{className:"stat-label",children:"Total Reviews"})]})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(N,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:r.pending}),e.jsx("span",{className:"stat-label",children:"Pending Approval"})]})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(j,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:r.approved}),e.jsx("span",{className:"stat-label",children:"Approved"})]})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(L,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:r.withPhotos}),e.jsx("span",{className:"stat-label",children:"With Photos"})]})]}),e.jsxs("div",{className:"stat-card accent",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(P,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:r.highRated}),e.jsx("span",{className:"stat-label",children:"4+ Stars"})]})]})]}),e.jsxs("div",{className:"reviews-controls",children:[e.jsx("div",{className:"search-section",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(Z,{}),e.jsx("input",{type:"text",placeholder:"Search reviews by name, email, or content...",value:p,onChange:s=>B(s.target.value),className:"search-input"})]})}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("div",{className:"filter-buttons",children:[e.jsxs("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>u("all"),children:["All (",r.total,")"]}),e.jsxs("button",{className:`filter-btn ${i==="pending"?"active":""}`,onClick:()=>u("pending"),children:["Pending (",r.pending,")"]}),e.jsxs("button",{className:`filter-btn ${i==="approved"?"active":""}`,onClick:()=>u("approved"),children:["Approved (",r.approved,")"]})]}),e.jsxs("div",{className:"sort-section",children:[e.jsx(q,{}),e.jsxs("select",{value:C,onChange:s=>z(s.target.value),className:"sort-select",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"rating-high",children:"Highest Rating"}),e.jsx("option",{value:"rating-low",children:"Lowest Rating"})]})]})]})]}),e.jsx("div",{className:"reviews-list",children:A.length===0?e.jsxs("div",{className:"no-reviews",children:[e.jsx(v,{size:48}),e.jsx("h3",{children:"No reviews found"}),e.jsx("p",{children:p?`No reviews match "${p}"`:`No ${i!=="all"?i:""} reviews available.`})]}):e.jsx($,{children:A.map((s,t)=>e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.05},className:`review-card ${s.approved?"approved":"pending"}`,children:[e.jsxs("div",{className:"review-card-header",children:[e.jsxs("div",{className:"reviewer-info",children:[e.jsx("div",{className:"reviewer-avatar",children:e.jsx(G,{})}),e.jsxs("div",{className:"reviewer-details",children:[l&&l.id===s.id?e.jsx("input",{type:"text",value:l.authorName,onChange:n=>m({...l,authorName:n.target.value}),className:"edit-input"}):e.jsx("h3",{children:s.authorName}),e.jsxs("div",{className:"reviewer-meta",children:[e.jsxs("span",{className:"reviewer-email",children:[e.jsx(Q,{}),s.authorEmail]}),e.jsxs("span",{className:"review-date",children:[e.jsx(X,{}),F(s.createdAt)]})]})]})]}),e.jsxs("div",{className:"review-rating-section",children:[e.jsxs("div",{className:"review-rating",children:[[...Array(5)].map((n,d)=>e.jsx(v,{className:d<s.rating?"star-filled":"star-empty"},d)),e.jsxs("span",{className:"rating-number",children:["(",s.rating,"/5)"]})]}),e.jsx("div",{className:`approval-status ${s.approved?"approved":"pending"}`,children:s.approved?e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx("span",{children:"Approved"})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("span",{children:"Pending"})]})})]})]}),e.jsxs("div",{className:"review-card-body",children:[s.title&&e.jsx("div",{className:"review-title-section",children:l&&l.id===s.id?e.jsx("input",{type:"text",value:l.title,onChange:n=>m({...l,title:n.target.value}),className:"edit-input"}):e.jsx("h4",{children:s.title})}),e.jsx("div",{className:"review-content-section",children:l&&l.id===s.id?e.jsx("textarea",{value:l.content,onChange:n=>m({...l,content:n.target.value}),className:"edit-textarea",rows:3}):e.jsx("p",{children:s.content})}),s.photos&&s.photos.length>0&&e.jsxs("div",{className:"review-photos-section",children:[e.jsxs("div",{className:"photos-header",children:[e.jsx(L,{}),e.jsxs("span",{children:[s.photos.length," Photo",s.photos.length>1?"s":""]})]}),e.jsxs("div",{className:"review-photos-grid",children:[s.photos.slice(0,3).map((n,d)=>e.jsx("div",{className:"review-photo-thumb",onClick:()=>k(s),children:e.jsx("img",{src:n,alt:`Review photo ${d+1}`})},d)),s.photos.length>3&&e.jsxs("div",{className:"photo-count-more",children:["+",s.photos.length-3," more"]})]})]}),e.jsxs("div",{className:"review-helpfulness",children:[e.jsx("span",{className:"helpful-label",children:"Helpfulness:"}),e.jsxs("div",{className:"helpful-votes",children:[e.jsxs("button",{className:"helpful-btn",onClick:()=>I(s.id),children:[e.jsx(P,{}),e.jsx("span",{children:s.helpful||0})]}),e.jsxs("button",{className:"unhelpful-btn",onClick:()=>K(s.id),children:[e.jsx(Y,{}),e.jsx("span",{children:s.unhelpful||0})]})]})]})]}),e.jsx("div",{className:"review-card-actions",children:l&&l.id===s.id?e.jsxs("div",{className:"edit-actions",children:[e.jsxs("button",{className:"btn-save",onClick:J,children:[e.jsx(j,{}),"Save Changes"]}),e.jsxs("button",{className:"btn-cancel",onClick:W,children:[e.jsx(M,{}),"Cancel"]})]}):e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-view",onClick:()=>k(s),title:"View Details",children:e.jsx(N,{})}),e.jsx("button",{className:"btn-edit",onClick:()=>S(s),title:"Edit Review",children:e.jsx(O,{})}),!s.approved&&e.jsx("button",{className:"btn-approve",onClick:()=>y(s.id),title:"Approve Review",children:e.jsx(j,{})}),e.jsx("button",{className:"btn-delete",onClick:()=>R(s.id),title:"Delete Review",children:e.jsx(U,{})})]})})]},s.id))})})]}),e.jsx($,{children:_&&a&&e.jsx("div",{className:"modal-overlay",onClick:x,children:e.jsxs(T.div,{className:"review-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Review Details"}),e.jsx("button",{className:"modal-close",onClick:x,children:e.jsx(M,{})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"modal-review-info",children:[e.jsxs("div",{className:"modal-reviewer",children:[e.jsx("strong",{children:a.authorName}),e.jsx("span",{children:a.authorEmail}),e.jsx("span",{children:F(a.createdAt)})]}),e.jsx("div",{className:"modal-rating",children:[...Array(5)].map((s,t)=>e.jsx(v,{className:t<a.rating?"star-filled":"star-empty"},t))})]}),a.title&&e.jsx("h3",{className:"modal-review-title",children:a.title}),e.jsx("p",{className:"modal-review-content",children:a.content}),a.photos&&a.photos.length>0&&e.jsxs("div",{className:"modal-photos-section",children:[e.jsx("h4",{children:"Customer Photos"}),e.jsx("div",{className:"modal-photos-grid",children:a.photos.map((s,t)=>e.jsx("img",{src:s,alt:`Review photo ${t+1}`,className:"modal-photo"},t))})]}),e.jsx("div",{className:"modal-helpfulness",children:e.jsxs("div",{className:"helpfulness-stats",children:[e.jsxs("span",{children:["ðŸ‘ ",a.helpful||0," helpful"]}),e.jsxs("span",{children:["ðŸ‘Ž ",a.unhelpful||0," unhelpful"]})]})})]}),e.jsxs("div",{className:"modal-actions",children:[!a.approved&&e.jsxs("button",{className:"btn-approve",onClick:()=>{y(a.id),x()},children:[e.jsx(j,{}),"Approve Review"]}),e.jsxs("button",{className:"btn-edit",onClick:()=>{S(a),x()},children:[e.jsx(O,{}),"Edit Review"]}),e.jsxs("button",{className:"btn-delete",onClick:()=>R(a.id),children:[e.jsx(U,{}),"Delete Review"]})]})]})})})]})};export{ce as default};
