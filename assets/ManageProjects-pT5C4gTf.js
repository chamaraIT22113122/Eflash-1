import{r as d,aG as h,j as e,a1 as A,m as v,K as N,aH as y,az as b,aD as D,a2 as L}from"./index-AdFfQu87.js";/* empty css                  */const W=()=>{const[p,x]=d.useState([]),[I,r]=d.useState(!0),[R,n]=d.useState("");d.useEffect(()=>{j()},[]);const j=async()=>{try{r(!0),n("");const s=await h.getAllProjects();x(s)}catch(s){console.error("Error loading projects:",s),n("Failed to load projects. Using offline mode.");const t=h.getFallbackProjects();x(t)}finally{r(!1)}},[f,u]=d.useState(!1),[i,c]=d.useState(null),[a,o]=d.useState({title:"",description:"",category:"Web Design",tags:[],technologies:[],liveUrl:"",thumbnail:"",images:[],features:[],stats:{users:"",pages:"",performance:"",completion:""}}),P=["Web Design","Branding","UI/UX","Graphic Design","E-Commerce"],w=["React","Vue","Angular","WordPress","Shopify","HTML","CSS","JavaScript","Node.js","Python","Tailwind","Bootstrap","MongoDB","MySQL","Firebase"],C=async()=>{if(!(!a.title||!a.description))try{r(!0),n("");const s={...a,tags:a.tags.filter(l=>l.trim()),technologies:a.technologies.filter(l=>l.trim()),features:a.features.filter(l=>l.trim())},t=await h.addProject(s);await j(),o({title:"",description:"",category:"Web Design",tags:[],technologies:[],liveUrl:"",thumbnail:"",images:[],features:[],stats:{users:"",pages:"",performance:"",completion:""}}),u(!1)}catch(s){console.error("Error adding project:",s),n("Failed to add project. Please try again.")}finally{r(!1)}},S=s=>{c({...s})},E=async()=>{if(i)try{r(!0),n("");const s=i._id||i.id;await h.updateProject(s,i),await j(),c(null)}catch(s){console.error("Error updating project:",s),n("Failed to update project. Please try again.")}finally{r(!1)}},U=async s=>{if(window.confirm("Are you sure you want to delete this project?"))try{r(!0),n(""),await h.deleteProject(s),await j()}catch(t){console.error("Error deleting project:",t),n("Failed to delete project. Please try again.")}finally{r(!1)}},F=(s,t=!1)=>{Array.from(s.target.files).forEach(k=>{const m=new FileReader;m.onloadend=()=>{t?c(g=>({...g,images:[...g.images,m.result]})):o(g=>({...g,images:[...g.images,m.result]}))},m.readAsDataURL(k)})};return e.jsxs("div",{className:"manage-projects admin-page admin-content",children:[e.jsxs("div",{className:"projects-header",children:[e.jsx("h1",{children:"Manage Projects"}),e.jsxs("button",{className:"add-project-btn",onClick:()=>u(!0),children:[e.jsx(A,{}),"Add New Project"]})]}),f&&e.jsxs(v.div,{className:"project-form-card",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Add New Project"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:s=>o({...a,title:s.target.value}),placeholder:"Enter project title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("select",{value:a.category,onChange:s=>o({...a,category:s.target.value}),children:P.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{value:a.description,onChange:s=>o({...a,description:s.target.value}),placeholder:"Project description",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Live URL (optional)"}),e.jsx("input",{type:"url",value:a.liveUrl,onChange:s=>o({...a,liveUrl:s.target.value}),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Technologies"}),e.jsx("div",{className:"tech-selector",children:w.map(s=>e.jsx("button",{type:"button",className:`tech-option ${a.technologies.includes(s)?"selected":""}`,onClick:()=>{a.technologies.includes(s)?o(t=>({...t,technologies:t.technologies.filter(l=>l!==s)})):o(t=>({...t,technologies:[...t.technologies,s]}))},children:s},s))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Project Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:s=>F(s,!1)}),a.images.length>0&&e.jsx("div",{className:"image-preview-grid",children:a.images.map((s,t)=>e.jsx("img",{src:s,alt:`Preview ${t}`},t))})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>u(!1),className:"btn-cancel",children:[e.jsx(N,{}),"Cancel"]}),e.jsxs("button",{onClick:C,className:"btn-save",children:[e.jsx(y,{}),"Add Project"]})]})]}),e.jsx("div",{className:"projects-grid",children:p.map(s=>{var t;return e.jsx(v.div,{className:"project-card",layout:!0,children:i&&i.id===s.id?e.jsxs("div",{className:"edit-form",children:[e.jsx("input",{type:"text",value:i.title,onChange:l=>c({...i,title:l.target.value})}),e.jsx("textarea",{value:i.description,onChange:l=>c({...i,description:l.target.value}),rows:3}),e.jsx("input",{type:"url",value:i.liveUrl,onChange:l=>c({...i,liveUrl:l.target.value}),placeholder:"Live URL"}),e.jsxs("div",{className:"edit-actions",children:[e.jsxs("button",{onClick:E,className:"btn-save",children:[e.jsx(y,{}),"Save"]}),e.jsxs("button",{onClick:()=>c(null),className:"btn-cancel",children:[e.jsx(N,{}),"Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"project-thumbnail",children:(t=s.images)!=null&&t[0]?e.jsx("img",{src:s.images[0],alt:s.title}):e.jsxs("div",{className:"no-image",children:[e.jsx(b,{}),e.jsx("span",{children:"No Image"})]})}),e.jsxs("div",{className:"project-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"project-category",children:s.category}),e.jsx("p",{className:"project-description",children:s.description}),s.technologies&&s.technologies.length>0&&e.jsxs("div",{className:"tech-tags",children:[s.technologies.slice(0,3).map(l=>e.jsx("span",{className:"tech-tag",children:l},l)),s.technologies.length>3&&e.jsxs("span",{className:"tech-more",children:["+",s.technologies.length-3]})]}),s.liveUrl&&e.jsx("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"live-link",children:"View Live Site"})]}),e.jsxs("div",{className:"project-actions",children:[e.jsx("button",{onClick:()=>S(s),className:"btn-edit",children:e.jsx(D,{})}),e.jsx("button",{onClick:()=>U(s.id),className:"btn-delete",children:e.jsx(L,{})})]})]})},s.id)})}),p.length===0&&!f&&e.jsxs("div",{className:"no-projects",children:[e.jsx(b,{size:48}),e.jsx("h3",{children:"No projects yet"}),e.jsx("p",{children:"Start by adding your first project"})]})]})};export{W as default};
