const o="eflash_reviews",s={addReview:(l,t)=>{const r={id:`REV-${Date.now()}`,productId:l,rating:t.rating,title:t.title,content:t.content,authorName:t.authorName,authorEmail:t.authorEmail,verified:t.verified||!1,photos:t.photos||[],helpful:0,unhelpful:0,helpfulVoters:[],unhelpfulVoters:[],createdAt:new Date().toISOString(),approved:!1},e=s.getAllReviews();return e.push(r),localStorage.setItem(o,JSON.stringify(e)),r},getAllReviews:()=>{const l=localStorage.getItem(o);return l?JSON.parse(l):[]},getProductReviews:(l,t=!0)=>s.getAllReviews().filter(e=>e.productId===l&&(!t||e.approved)),getAverageRating:l=>{const t=s.getProductReviews(l,!0);return t.length===0?0:(t.reduce((e,i)=>e+i.rating,0)/t.length).toFixed(1)},getRatingDistribution:l=>{const t=s.getProductReviews(l,!0),r={5:0,4:0,3:0,2:0,1:0};return t.forEach(e=>{r[e.rating]++}),r},approveReview:l=>{const t=s.getAllReviews(),r=t.find(e=>e.id===l);return r&&(r.approved=!0,localStorage.setItem(o,JSON.stringify(t))),r},markHelpful:(l,t="anonymous")=>{const r=s.getAllReviews(),e=r.find(i=>i.id===l);return e&&(e.helpfulVoters||(e.helpfulVoters=[]),e.unhelpfulVoters||(e.unhelpfulVoters=[]),e.helpfulVoters.includes(t)?(e.helpful--,e.helpfulVoters=e.helpfulVoters.filter(i=>i!==t)):(e.unhelpfulVoters.includes(t)&&(e.unhelpful--,e.unhelpfulVoters=e.unhelpfulVoters.filter(i=>i!==t)),e.helpful++,e.helpfulVoters.push(t)),localStorage.setItem(o,JSON.stringify(r))),e},markUnhelpful:(l,t="anonymous")=>{const r=s.getAllReviews(),e=r.find(i=>i.id===l);return e&&(e.helpfulVoters||(e.helpfulVoters=[]),e.unhelpfulVoters||(e.unhelpfulVoters=[]),e.unhelpfulVoters.includes(t)?(e.unhelpful--,e.unhelpfulVoters=e.unhelpfulVoters.filter(i=>i!==t)):(e.helpfulVoters.includes(t)&&(e.helpful--,e.helpfulVoters=e.helpfulVoters.filter(i=>i!==t)),e.unhelpful++,e.unhelpfulVoters.push(t)),localStorage.setItem(o,JSON.stringify(r))),e},getPendingReviews:()=>s.getAllReviews().filter(t=>!t.approved),deleteReview:l=>{const r=s.getAllReviews().filter(e=>e.id!==l);return localStorage.setItem(o,JSON.stringify(r)),!0}},n=s.getAllReviews,u=s.approveReview,f=s.deleteReview,p=s.markHelpful,h=s.markUnhelpful;export{h as a,u as b,f as d,n as g,p as m,s as r};
