const l="eflash_blog_posts",o={createPost:s=>{const e={id:`POST-${Date.now()}`,slug:s.slug||s.title.toLowerCase().replace(/\s+/g,"-"),...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),published:s.published||!1,views:0,likes:0,comments:[]},t=o.getAllPosts();return t.push(e),localStorage.setItem(l,JSON.stringify(t)),e},getAllPosts:()=>{const s=localStorage.getItem(l);return s?JSON.parse(s):[]},getPublishedPosts:()=>o.getAllPosts().filter(e=>e.published).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),getPostByIdentifier:s=>o.getAllPosts().find(t=>t.id===s||t.slug===s),getPostsByCategory:s=>o.getPublishedPosts().filter(t=>t.category===s),getPostsByTag:s=>o.getPublishedPosts().filter(t=>t.tags&&t.tags.includes(s)),searchPosts:s=>{const e=o.getPublishedPosts(),t=s.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(t)||r.content.toLowerCase().includes(t)||r.tags&&r.tags.some(n=>n.toLowerCase().includes(t)))},updatePost:(s,e)=>{const t=o.getAllPosts(),r=t.findIndex(n=>n.id===s);return r!==-1?(t[r]={...t[r],...e,updatedAt:new Date().toISOString()},localStorage.setItem(l,JSON.stringify(t)),t[r]):null},deletePost:s=>{const t=o.getAllPosts().filter(r=>r.id!==s);return localStorage.setItem(l,JSON.stringify(t)),t},incrementViews:s=>{const e=o.getPostByIdentifier(s);return e?(e.views=(e.views||0)+1,o.updatePost(s,{views:e.views})):null},addComment:(s,e)=>{const t=o.getPostByIdentifier(s);if(t){t.comments||(t.comments=[]);const r={id:`COM-${Date.now()}`,...e,createdAt:new Date().toISOString(),approved:!1};return t.comments.push(r),o.updatePost(s,{comments:t.comments})}return null},getTrendingPosts:(s=5)=>o.getPublishedPosts().sort((t,r)=>(r.views||0)-(t.views||0)).slice(0,s),getRelatedPosts:(s,e=3)=>{const t=o.getPostByIdentifier(s);return t?o.getPublishedPosts().filter(n=>n.id!==s&&(n.category===t.category||n.tags&&t.tags&&n.tags.some(a=>t.tags.includes(a)))).slice(0,e):[]},getAllCategories:()=>{const s=o.getPublishedPosts(),e=new Set(s.map(t=>t.category).filter(Boolean));return Array.from(e)},getAllTags:()=>{const s=o.getPublishedPosts(),e=new Set;return s.forEach(t=>{t.tags&&Array.isArray(t.tags)&&t.tags.forEach(r=>e.add(r))}),Array.from(e)},publishPost:(s,e=!0)=>o.updatePost(s,{published:e})},i=o.createPost,c=o.getAllPosts,g=o.updatePost,u=o.deletePost,d=o.publishPost;export{o as b,i as c,u as d,c as g,d as p,g as u};
