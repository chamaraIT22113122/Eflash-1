import{r as N,ae as S,af as R,j as s,$ as A,b as P,q as p,X as b,m as o,l as F,L as n,aw as D,aa as V,ax as E,ay as O}from"./index-DliiBw_A.js";import{r as L}from"./reviewService-DuEf9uSn.js";import{o as T}from"./orderService-BTvih5gT.js";import{b as C}from"./blogService-C4FcVD8p.js";/* empty css                  */const W=()=>{var g,u;const[a,x]=N.useState({analytics:null,orders:{total:0,pending:0,revenue:0},reviews:{total:0,pending:0,avgRating:0},blog:{total:0,published:0,drafts:0}});N.useEffect(()=>{y()},[]);const y=async()=>{try{const e=S(),c=R(),r=T.getAllOrders(),l=r.filter(i=>i.status==="pending"),h=r.filter(i=>i.status==="completed").reduce((i,v)=>i+(v.totalAmount||0),0),t=await L.getAllReviews(),f=t.filter(i=>i.status==="pending"||!i.status),w=t.length>0?t.reduce((i,v)=>i+(v.rating||0),0)/t.length:0,m=C.getAllPosts(),k=m.filter(i=>i.status==="published"),q=m.filter(i=>i.status==="draft");x({analytics:e,analyticsDetails:c,orders:{total:r.length,pending:l.length,revenue:h},reviews:{total:t.length,pending:f.length,avgRating:w.toFixed(1)},blog:{total:m.length,published:k.length,drafts:q.length}})}catch(e){console.error("Error loading dashboard stats:",e),x({analytics:null,orders:{total:0,pending:0,revenue:0},reviews:{total:0,pending:0,avgRating:0},blog:{total:0,published:0,drafts:0}})}},d=({icon:e,title:c,value:r,change:l,color:h,link:t})=>s.jsx(o.div,{className:"stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},children:s.jsxs(n,{to:t,className:"stat-card-link",children:[s.jsx("div",{className:"stat-icon",style:{background:h},children:e}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-title",children:c}),s.jsx("div",{className:"stat-value",children:r}),l&&s.jsxs("div",{className:`stat-change ${l>=0?"positive":"negative"}`,children:[l>=0?s.jsx(E,{}):s.jsx(O,{}),Math.abs(l),"%"]})]})]})}),j=()=>{var e;return(e=a.analyticsDetails)!=null&&e.pageViews?a.analyticsDetails.pageViews.slice(-5).reverse():[]};return s.jsxs("div",{className:"admin-dashboard admin-page admin-content",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsx("h2",{children:"Dashboard Overview"}),s.jsx("p",{children:"Welcome back! Here's what's happening with your site."})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsx(d,{icon:s.jsx(A,{}),title:"Page Views",value:((g=a.analytics)==null?void 0:g.totalPageViews.toLocaleString())||"0",color:"linear-gradient(135deg, #667eea, #764ba2)",link:"/admin/analytics"}),s.jsx(d,{icon:s.jsx(P,{}),title:"Unique Visitors",value:((u=a.analytics)==null?void 0:u.uniqueVisitors.toLocaleString())||"0",color:"linear-gradient(135deg, #f093fb, #f5576c)",link:"/admin/analytics"}),s.jsx(d,{icon:s.jsx(p,{}),title:"Total Orders",value:a.orders.total,color:"linear-gradient(135deg, #4facfe, #00f2fe)",link:"/admin/orders"}),s.jsx(d,{icon:s.jsx(b,{}),title:"Avg Rating",value:`${a.reviews.avgRating} ⭐`,color:"linear-gradient(135deg, #43e97b, #38f9d7)",link:"/admin/reviews"})]}),s.jsxs("div",{className:"quick-stats",children:[s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Pending Orders"}),s.jsx("div",{className:"quick-stat-value",children:a.orders.pending})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Pending Reviews"}),s.jsx("div",{className:"quick-stat-value",children:a.reviews.pending})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Published Posts"}),s.jsx("div",{className:"quick-stat-value",children:a.blog.published})]}),s.jsxs("div",{className:"quick-stat-item",children:[s.jsx("div",{className:"quick-stat-label",children:"Draft Posts"}),s.jsx("div",{className:"quick-stat-value",children:a.blog.drafts})]})]}),s.jsxs("div",{className:"dashboard-content-grid",children:[s.jsxs(o.div,{className:"dashboard-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h3",{children:[s.jsx(F,{})," Recent Traffic"]}),s.jsx(n,{to:"/admin/analytics",className:"view-all-link",children:"View All"})]}),s.jsx("div",{className:"recent-traffic-list",children:j().length>0?j().map((e,c)=>s.jsxs("div",{className:"traffic-item",children:[s.jsxs("div",{className:"traffic-info",children:[s.jsx("div",{className:"traffic-page",children:e.path==="/"?"Home":e.path}),s.jsxs("div",{className:"traffic-meta",children:[e.device," • ",e.browser," • ",new Date(e.timestamp).toLocaleTimeString()]})]}),s.jsx("div",{className:"traffic-source",children:e.source})]},c)):s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"No traffic data yet"})})})]}),s.jsxs(o.div,{className:"dashboard-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{children:"Quick Actions"})}),s.jsxs("div",{className:"quick-links",children:[s.jsxs(n,{to:"/admin/blog",className:"quick-link-btn",children:[s.jsx(D,{}),s.jsx("span",{children:"Create Blog Post"})]}),s.jsxs(n,{to:"/admin/reviews",className:"quick-link-btn",children:[s.jsx(b,{}),s.jsx("span",{children:"Moderate Reviews"})]}),s.jsxs(n,{to:"/admin/orders",className:"quick-link-btn",children:[s.jsx(p,{}),s.jsx("span",{children:"View Orders"})]}),s.jsxs(n,{to:"/admin/newsletter",className:"quick-link-btn",children:[s.jsx(V,{}),s.jsx("span",{children:"Send Newsletter"})]})]})]}),s.jsxs(o.div,{className:"dashboard-card full-width",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{children:"Website Statistics"})}),s.jsx("div",{className:"website-stats-grid",children:a.analytics&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Total Sessions"}),s.jsx("div",{className:"stat-number",children:a.analytics.totalSessions})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Bounce Rate"}),s.jsxs("div",{className:"stat-number",children:[a.analytics.bounceRate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Avg. Session Time"}),s.jsxs("div",{className:"stat-number",children:[Math.round(a.analytics.avgSessionDuration/1e3/60),"m"]})]}),s.jsxs("div",{className:"website-stat",children:[s.jsx("div",{className:"stat-label",children:"Total Events"}),s.jsx("div",{className:"stat-number",children:a.analytics.totalEvents})]})]})})]})]})]})};export{W as default};
