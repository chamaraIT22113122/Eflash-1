import{r as h,aG as x,j as e,a3 as R,m as k,K as f,aH as L,az as _,aD as X,a4 as q}from"./index-B9PceAyC.js";/* empty css                  */const se=()=>{const[F,D]=h.useState([]),[v,u]=h.useState(!0),[A,m]=h.useState("");h.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0),m("");const s=await x.getAllProjects();D(s)}catch(s){console.error("Error loading projects:",s),m("Failed to load projects. Using offline mode.");const t=x.getFallbackProjects();D(t)}finally{u(!1)}},[b,y]=h.useState(!1),[o,c]=h.useState(null),I={title:"",description:"",category:"Web Design",tags:[],technologies:[],liveUrl:"",thumbnail:"",images:[],features:[],clientName:"",projectDate:"",duration:"",challenge:"",solution:"",result:"",stats:{users:"",pages:"",performance:"",completion:""}},[d,g]=h.useState(I),W=["Web Design","Branding","UI/UX","Graphic Design","E-Commerce"],M=["React","Vue","Angular","WordPress","Shopify","HTML","CSS","JavaScript","Node.js","Python","Tailwind","Bootstrap","MongoDB","MySQL","Firebase"],B=async()=>{var s;if(!(!d.title||!d.description))try{u(!0),m("");const t={...d,tags:d.tags.filter(n=>n.trim()),technologies:d.technologies.filter(n=>n.trim()),features:d.features.filter(n=>n.trim()),thumbnail:d.thumbnail||((s=d.images)==null?void 0:s[0])||""},r=await x.addProject(t);await N(),g(I),y(!1)}catch(t){console.error("Error adding project:",t),m("Failed to add project. Please try again.")}finally{u(!1)}},H=s=>{c({...s})},K=async()=>{var s;if(o)try{u(!0),m("");const t=o._id||o.id,r={...o,thumbnail:o.thumbnail||((s=o.images)==null?void 0:s[0])||""};await x.updateProject(t,r),await N(),c(null)}catch(t){console.error("Error updating project:",t),m("Failed to update project. Please try again.")}finally{u(!1)}},O=async s=>{if(window.confirm("Are you sure you want to delete this project?"))try{u(!0),m(""),await x.deleteProject(s),await N()}catch(t){console.error("Error deleting project:",t),m("Failed to delete project. Please try again.")}finally{u(!1)}},V=(s,t=!1)=>{Array.from(s.target.files).forEach(n=>{const i=new FileReader;i.onloadend=()=>{t?c(j=>({...j,images:[...j.images,i.result]})):g(j=>({...j,images:[...j.images,i.result]}))},i.readAsDataURL(n)})},T=(s,t=!1)=>{s.trim()&&(t?o.tags.includes(s)||c(r=>({...r,tags:[...r.tags,s]})):d.tags.includes(s)||g(r=>({...r,tags:[...r.tags,s]})))},$=(s=!1)=>{s?c(t=>({...t,features:[...t.features||[],""]})):g(t=>({...t,features:[...t.features||[],""]}))},z=(s,t,r=!1)=>{r?c(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}}):g(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}})},G=(s,t=!1)=>{t?c(r=>({...r,features:r.features.filter((n,i)=>i!==s)})):g(r=>({...r,features:r.features.filter((n,i)=>i!==s)}))},J=(s,t=!1)=>{t?c(r=>({...r,tags:r.tags.filter(n=>n!==s)})):g(r=>({...r,tags:r.tags.filter(n=>n!==s)}))},[w,C]=h.useState(""),[P,S]=h.useState(""),U=(s,t,r=!1)=>{var n,i,j,E;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-section-title",children:"Card Information (shown on portfolio grid)"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>t(l=>({...l,title:a.target.value})),placeholder:"Enter project title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("select",{value:s.category,onChange:a=>t(l=>({...l,category:a.target.value})),children:W.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Client Name"}),e.jsx("input",{type:"text",value:s.clientName||"",onChange:a=>t(l=>({...l,clientName:a.target.value})),placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Date"}),e.jsx("input",{type:"month",value:s.projectDate||"",onChange:a=>t(l=>({...l,projectDate:a.target.value}))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Short Description * (shown on card)"}),e.jsx("textarea",{value:s.description,onChange:a=>t(l=>({...l,description:a.target.value})),placeholder:"Brief description shown on the portfolio card",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Live URL (optional)"}),e.jsx("input",{type:"url",value:s.liveUrl||"",onChange:a=>t(l=>({...l,liveUrl:a.target.value})),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Duration"}),e.jsx("input",{type:"text",value:s.duration||"",onChange:a=>t(l=>({...l,duration:a.target.value})),placeholder:"e.g. 4 weeks"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Card Tags"}),e.jsxs("div",{className:"tag-input-row",children:[e.jsx("input",{type:"text",value:r?P:w,onChange:a=>r?S(a.target.value):C(a.target.value),onKeyDown:a=>{(a.key==="Enter"||a.key===",")&&(a.preventDefault(),T(r?P:w,r),r?S(""):C(""))},placeholder:"Type tag and press Enter"}),e.jsx("button",{type:"button",className:"btn-add-tag",onClick:()=>{T(r?P:w,r),r?S(""):C("")},children:"Add"})]}),e.jsx("div",{className:"tags-list",children:(s.tags||[]).map(a=>e.jsxs("span",{className:"tag-chip",children:[a,e.jsx("button",{type:"button",onClick:()=>J(a,r),children:e.jsx(f,{})})]},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Project Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:a=>V(a,r)}),(s.images||[]).length>0&&e.jsx("div",{className:"image-preview-grid",children:(s.images||[]).map((a,l)=>e.jsxs("div",{className:"image-preview-item",children:[e.jsx("img",{src:a,alt:`Preview ${l}`}),e.jsx("button",{type:"button",className:"remove-img-btn",onClick:()=>{t(p=>({...p,images:p.images.filter((Y,Q)=>Q!==l)}))},children:e.jsx(f,{})})]},l))})]})]}),e.jsx("div",{className:"form-section-title popup-section-title",children:'Popup Details (shown when "View Details" is clicked)'}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Technologies Used"}),e.jsx("div",{className:"tech-selector",children:M.map(a=>e.jsx("button",{type:"button",className:`tech-option ${(s.technologies||[]).includes(a)?"selected":""}`,onClick:()=>{t(l=>({...l,technologies:(l.technologies||[]).includes(a)?l.technologies.filter(p=>p!==a):[...l.technologies||[],a]}))},children:a},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Challenge"}),e.jsx("textarea",{value:s.challenge||"",onChange:a=>t(l=>({...l,challenge:a.target.value})),placeholder:"What was the challenge or problem this project solved?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Solution"}),e.jsx("textarea",{value:s.solution||"",onChange:a=>t(l=>({...l,solution:a.target.value})),placeholder:"How did you solve it? What approach was taken?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Result"}),e.jsx("textarea",{value:s.result||"",onChange:a=>t(l=>({...l,result:a.target.value})),placeholder:"What were the outcomes or measurable results?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Key Features / Deliverables"}),(s.features||[]).map((a,l)=>e.jsxs("div",{className:"feature-input-row",children:[e.jsx("input",{type:"text",value:a,onChange:p=>z(l,p.target.value,r),placeholder:`Feature ${l+1}`}),e.jsx("button",{type:"button",className:"btn-remove-feature",onClick:()=>G(l,r),children:e.jsx(f,{})})]},l)),e.jsxs("button",{type:"button",className:"btn-add-feature",onClick:()=>$(r),children:[e.jsx(R,{})," Add Feature"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Users / Reach"}),e.jsx("input",{type:"text",value:((n=s.stats)==null?void 0:n.users)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,users:a.target.value}})),placeholder:"e.g. 500+ users"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Pages / Screens"}),e.jsx("input",{type:"text",value:((i=s.stats)==null?void 0:i.pages)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,pages:a.target.value}})),placeholder:"e.g. 12 pages"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Performance Score"}),e.jsx("input",{type:"text",value:((j=s.stats)==null?void 0:j.performance)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,performance:a.target.value}})),placeholder:"e.g. 98/100"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Completion / ROI"}),e.jsx("input",{type:"text",value:((E=s.stats)==null?void 0:E.completion)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,completion:a.target.value}})),placeholder:"e.g. On time"})]})]})]})};return e.jsxs("div",{className:"manage-projects admin-page admin-content",children:[e.jsxs("div",{className:"projects-header",children:[e.jsx("h1",{children:"Manage Projects"}),!b&&e.jsxs("button",{className:"add-project-btn",onClick:()=>y(!0),children:[e.jsx(R,{}),"Add New Project"]})]}),A&&e.jsx("div",{className:"error-banner",children:A}),v&&e.jsx("div",{className:"loading-banner",children:"Saving..."}),b&&e.jsxs(k.div,{className:"project-form-card",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Add New Project"}),U(d,g,!1),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>y(!1),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:B,className:"btn-save",disabled:v,children:[e.jsx(L,{})," Add Project"]})]})]}),o&&e.jsx(k.div,{className:"project-form-card edit-modal-overlay",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"edit-modal-inner",children:[e.jsxs("h3",{children:["Edit Project: ",o.title]}),U(o,c,!0),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>c(null),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:K,className:"btn-save",disabled:v,children:[e.jsx(L,{})," Save Changes"]})]})]})}),!b&&!o&&e.jsx("div",{className:"projects-grid",children:F.map(s=>{var t,r;return e.jsxs(k.div,{className:"project-card",layout:!0,children:[e.jsx("div",{className:"project-thumbnail",children:(t=s.images)!=null&&t[0]||s.thumbnail?e.jsx("img",{src:((r=s.images)==null?void 0:r[0])||s.thumbnail,alt:s.title}):e.jsxs("div",{className:"no-image",children:[e.jsx(_,{}),e.jsx("span",{children:"No Image"})]})}),e.jsxs("div",{className:"project-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"project-category",children:s.category}),s.clientName&&e.jsxs("p",{className:"project-client",children:["Client: ",s.clientName]}),e.jsx("p",{className:"project-description",children:s.description}),s.technologies&&s.technologies.length>0&&e.jsxs("div",{className:"tech-tags",children:[s.technologies.slice(0,3).map(n=>e.jsx("span",{className:"tech-tag",children:n},n)),s.technologies.length>3&&e.jsxs("span",{className:"tech-more",children:["+",s.technologies.length-3]})]}),s.liveUrl&&e.jsx("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"live-link",children:"View Live Site"})]}),e.jsxs("div",{className:"project-actions",children:[e.jsx("button",{onClick:()=>H(s),className:"btn-edit",title:"Edit",children:e.jsx(X,{})}),e.jsx("button",{onClick:()=>O(s._id||s.id),className:"btn-delete",title:"Delete",children:e.jsx(q,{})})]})]},s._id||s.id)})}),F.length===0&&!b&&!v&&e.jsxs("div",{className:"no-projects",children:[e.jsx(_,{size:48}),e.jsx("h3",{children:"No projects yet"}),e.jsx("p",{children:'Click "Add New Project" to add your first project'})]})]})};export{se as default};
