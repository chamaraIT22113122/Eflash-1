import{r as d,aH as v,j as e,aI as K,a3 as F,m as C,K as f,aJ as J,aA as $,aE as ne,a4 as ie}from"./index-BkmppxC1.js";/* empty css                       *//* empty css                  */const G="portfolioCategories",ue=()=>{const[I,T]=d.useState([]),[y,h]=d.useState(!0),[A,o]=d.useState(""),[p,U]=d.useState(()=>{try{const s=localStorage.getItem(G);return s?JSON.parse(s):["Web Design","Branding","UI/UX","Graphic Design"]}catch{return["Web Design","Branding","UI/UX","Graphic Design"]}}),[H,V]=d.useState(!1),[E,R]=d.useState("");d.useEffect(()=>{localStorage.setItem(G,JSON.stringify(p))},[p]);const M=()=>{const s=E.trim();!s||p.includes(s)||(U(t=>[...t,s]),R(""))},Y=s=>{U(t=>t.filter(r=>r!==s))};d.useEffect(()=>{N()},[]);const N=async()=>{try{h(!0),o("");const s=await v.getAllProjects();T(s)}catch(s){console.error("Error loading projects:",s),o("Failed to load projects. Using offline mode.");const t=v.getFallbackProjects();T(t)}finally{h(!1)}},[b,w]=d.useState(!1),[c,g]=d.useState(null),_={title:"",description:"",category:"Web Design",tags:[],technologies:[],liveUrl:"",thumbnail:"",images:[],features:[],clientName:"",projectDate:"",duration:"",challenge:"",solution:"",result:"",stats:{users:"",pages:"",performance:"",completion:""}},[u,m]=d.useState(_),X=["React","Vue","Angular","WordPress","Shopify","HTML","CSS","JavaScript","Node.js","Python","Tailwind","Bootstrap","MongoDB","MySQL","Firebase"],q=async()=>{var s;if(!u.title.trim()){o("⚠️ Please enter a Project Title.");return}if(!u.description.trim()){o("⚠️ Please enter a Short Description.");return}try{h(!0),o("");const t={...u,title:u.title.trim(),description:u.description.trim(),tags:u.tags.filter(n=>n.trim()),technologies:u.technologies.filter(n=>n.trim()),features:u.features.filter(n=>n.trim()),thumbnail:u.thumbnail||((s=u.images)==null?void 0:s[0])||""};if(!await v.addProject(t)){o("⚠️ Failed to save project. Your device storage may be full. Try clearing browser cache."),h(!1);return}await N(),m(_),w(!1)}catch(t){console.error("Error adding project:",t),o("Failed to add project. Please try again.")}finally{h(!1)}},z=s=>{g({...s})},Q=async()=>{var s,t;if(c){if(!((s=c.title)!=null&&s.trim())){o("⚠️ Project Title cannot be empty.");return}try{h(!0),o("");const r=c._id||c.id,n={...c,title:c.title.trim(),thumbnail:c.thumbnail||((t=c.images)==null?void 0:t[0])||""};if(!await v.updateProject(r,n)){o("⚠️ Failed to save changes. Your device storage may be full."),h(!1);return}await N(),g(null)}catch(r){console.error("Error updating project:",r),o("Failed to update project. Please try again.")}finally{h(!1)}}},Z=async s=>{if(window.confirm("Are you sure you want to delete this project?"))try{h(!0),o(""),await v.deleteProject(s),await N()}catch(t){console.error("Error deleting project:",t),o("Failed to delete project. Please try again.")}finally{h(!1)}},ee=(s,t=!1)=>{Array.from(s.target.files).forEach(n=>{const i=new FileReader;i.onloadend=()=>{t?g(j=>({...j,images:[...j.images,i.result]})):m(j=>({...j,images:[...j.images,i.result]}))},i.readAsDataURL(n)})},L=(s,t=!1)=>{s.trim()&&(t?c.tags.includes(s)||g(r=>({...r,tags:[...r.tags,s]})):u.tags.includes(s)||m(r=>({...r,tags:[...r.tags,s]})))},se=(s=!1)=>{s?g(t=>({...t,features:[...t.features||[],""]})):m(t=>({...t,features:[...t.features||[],""]}))},ae=(s,t,r=!1)=>{r?g(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}}):m(n=>{const i=[...n.features||[]];return i[s]=t,{...n,features:i}})},te=(s,t=!1)=>{t?g(r=>({...r,features:r.features.filter((n,i)=>i!==s)})):m(r=>({...r,features:r.features.filter((n,i)=>i!==s)}))},le=(s,t=!1)=>{t?g(r=>({...r,tags:r.tags.filter(n=>n!==s)})):m(r=>({...r,tags:r.tags.filter(n=>n!==s)}))},[P,S]=d.useState(""),[k,D]=d.useState(""),W=(s,t,r=!1)=>{var n,i,j,O;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-section-title",children:"Card Information (shown on portfolio grid)"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>t(l=>({...l,title:a.target.value})),placeholder:"Enter project title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",value:s.category||"",onChange:a=>t(l=>({...l,category:a.target.value})),placeholder:"Type or pick a category below…"}),p.length>0&&e.jsx("div",{className:"category-chips",children:p.map(a=>e.jsx("button",{type:"button",className:`category-chip${s.category===a?" active":""}`,onClick:()=>t(l=>({...l,category:a})),children:a},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Client Name"}),e.jsx("input",{type:"text",value:s.clientName||"",onChange:a=>t(l=>({...l,clientName:a.target.value})),placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project Date"}),e.jsx("input",{type:"month",value:s.projectDate||"",onChange:a=>t(l=>({...l,projectDate:a.target.value}))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Short Description * (shown on card)"}),e.jsx("textarea",{value:s.description,onChange:a=>t(l=>({...l,description:a.target.value})),placeholder:"Brief description shown on the portfolio card",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Live URL (optional)"}),e.jsx("input",{type:"url",value:s.liveUrl||"",onChange:a=>t(l=>({...l,liveUrl:a.target.value})),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Duration"}),e.jsx("input",{type:"text",value:s.duration||"",onChange:a=>t(l=>({...l,duration:a.target.value})),placeholder:"e.g. 4 weeks"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Card Tags"}),e.jsxs("div",{className:"tag-input-row",children:[e.jsx("input",{type:"text",value:r?k:P,onChange:a=>r?D(a.target.value):S(a.target.value),onKeyDown:a=>{(a.key==="Enter"||a.key===",")&&(a.preventDefault(),L(r?k:P,r),r?D(""):S(""))},placeholder:"Type tag and press Enter"}),e.jsx("button",{type:"button",className:"btn-add-tag",onClick:()=>{L(r?k:P,r),r?D(""):S("")},children:"Add"})]}),e.jsx("div",{className:"tags-list",children:(s.tags||[]).map(a=>e.jsxs("span",{className:"tag-chip",children:[a,e.jsx("button",{type:"button",onClick:()=>le(a,r),children:e.jsx(f,{})})]},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Project Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:a=>ee(a,r)}),(s.images||[]).length>0&&e.jsx("div",{className:"image-preview-grid",children:(s.images||[]).map((a,l)=>e.jsxs("div",{className:"image-preview-item",children:[e.jsx("img",{src:a,alt:`Preview ${l}`}),e.jsx("button",{type:"button",className:"remove-img-btn",onClick:()=>{t(x=>({...x,images:x.images.filter((B,re)=>re!==l)}))},children:e.jsx(f,{})})]},l))})]})]}),e.jsx("div",{className:"form-section-title popup-section-title",children:'Popup Details (shown when "View Details" is clicked)'}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Technologies Used"}),e.jsx("div",{className:"tech-selector",children:X.map(a=>e.jsx("button",{type:"button",className:`tech-option ${(s.technologies||[]).includes(a)?"selected":""}`,onClick:()=>{const l=s.technologies||[];t(x=>({...x,technologies:l.includes(a)?l.filter(B=>B!==a):[...l,a]}))},children:a},a))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Challenge"}),e.jsx("textarea",{value:s.challenge||"",onChange:a=>t(l=>({...l,challenge:a.target.value})),placeholder:"What was the challenge or problem this project solved?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Solution"}),e.jsx("textarea",{value:s.solution||"",onChange:a=>t(l=>({...l,solution:a.target.value})),placeholder:"How did you solve it? What approach was taken?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Result"}),e.jsx("textarea",{value:s.result||"",onChange:a=>t(l=>({...l,result:a.target.value})),placeholder:"What were the outcomes or measurable results?",rows:3})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Key Features / Deliverables"}),(s.features||[]).map((a,l)=>e.jsxs("div",{className:"feature-input-row",children:[e.jsx("input",{type:"text",value:a,onChange:x=>ae(l,x.target.value,r),placeholder:`Feature ${l+1}`}),e.jsx("button",{type:"button",className:"btn-remove-feature",onClick:()=>te(l,r),children:e.jsx(f,{})})]},l)),e.jsxs("button",{type:"button",className:"btn-add-feature",onClick:()=>se(r),children:[e.jsx(F,{})," Add Feature"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Users / Reach"}),e.jsx("input",{type:"text",value:((n=s.stats)==null?void 0:n.users)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,users:a.target.value}})),placeholder:"e.g. 500+ users"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Pages / Screens"}),e.jsx("input",{type:"text",value:((i=s.stats)==null?void 0:i.pages)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,pages:a.target.value}})),placeholder:"e.g. 12 pages"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Performance Score"}),e.jsx("input",{type:"text",value:((j=s.stats)==null?void 0:j.performance)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,performance:a.target.value}})),placeholder:"e.g. 98/100"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stat: Completion / ROI"}),e.jsx("input",{type:"text",value:((O=s.stats)==null?void 0:O.completion)||"",onChange:a=>t(l=>({...l,stats:{...l.stats,completion:a.target.value}})),placeholder:"e.g. On time"})]})]})]})};return e.jsxs("div",{className:"manage-projects admin-page admin-content",children:[e.jsxs("div",{className:"projects-header",children:[e.jsx("h1",{children:"Manage Projects"}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"manage-categories-btn",onClick:()=>V(s=>!s),children:[e.jsx(K,{}),"Manage Categories"]}),!b&&e.jsxs("button",{className:"add-project-btn",onClick:()=>w(!0),children:[e.jsx(F,{}),"Add New Project"]})]})]}),H&&e.jsxs(C.div,{className:"category-manager-panel",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsxs("h3",{children:[e.jsx(K,{})," Portfolio Categories"]}),e.jsx("p",{className:"category-manager-hint",children:"These categories appear as quick-pick chips when adding or editing a project."}),e.jsxs("div",{className:"category-manager-input-row",children:[e.jsx("input",{type:"text",value:E,onChange:s=>R(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),M())},placeholder:"New category name…"}),e.jsxs("button",{type:"button",className:"btn-add-category",onClick:M,children:[e.jsx(F,{})," Add"]})]}),e.jsxs("div",{className:"category-manager-list",children:[p.length===0&&e.jsx("span",{className:"no-categories",children:"No categories yet."}),p.map(s=>e.jsxs("span",{className:"category-manager-chip",children:[s,e.jsx("button",{type:"button",onClick:()=>Y(s),title:"Remove",children:e.jsx(f,{})})]},s))]})]}),A&&e.jsx("div",{className:"error-banner",children:A}),y&&e.jsx("div",{className:"loading-banner",children:"Saving..."}),b&&e.jsxs(C.div,{className:"project-form-card",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Add New Project"}),W(u,m,!1),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>w(!1),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:q,className:"btn-save",disabled:y,children:[e.jsx(J,{})," Add Project"]})]})]}),c&&e.jsx(C.div,{className:"project-form-card edit-modal-overlay",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"edit-modal-inner",children:[e.jsxs("h3",{children:["Edit Project: ",c.title]}),W(c,g,!0),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{onClick:()=>g(null),className:"btn-cancel",children:[e.jsx(f,{})," Cancel"]}),e.jsxs("button",{onClick:Q,className:"btn-save",disabled:y,children:[e.jsx(J,{})," Save Changes"]})]})]})}),!b&&!c&&e.jsx("div",{className:"projects-grid",children:I.map(s=>{var t,r;return e.jsxs(C.div,{className:"project-card",layout:!0,children:[e.jsx("div",{className:"project-thumbnail",children:(t=s.images)!=null&&t[0]||s.thumbnail?e.jsx("img",{src:((r=s.images)==null?void 0:r[0])||s.thumbnail,alt:s.title}):e.jsxs("div",{className:"no-image",children:[e.jsx($,{}),e.jsx("span",{children:"No Image"})]})}),e.jsxs("div",{className:"project-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"project-category",children:s.category}),s.clientName&&e.jsxs("p",{className:"project-client",children:["Client: ",s.clientName]}),e.jsx("p",{className:"project-description",children:s.description}),s.technologies&&s.technologies.length>0&&e.jsxs("div",{className:"tech-tags",children:[s.technologies.slice(0,3).map(n=>e.jsx("span",{className:"tech-tag",children:n},n)),s.technologies.length>3&&e.jsxs("span",{className:"tech-more",children:["+",s.technologies.length-3]})]}),s.liveUrl&&e.jsx("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"live-link",children:"View Live Site"})]}),e.jsxs("div",{className:"project-actions",children:[e.jsx("button",{onClick:()=>z(s),className:"btn-edit",title:"Edit",children:e.jsx(ne,{})}),e.jsx("button",{onClick:()=>Z(s._id||s.id),className:"btn-delete",title:"Delete",children:e.jsx(ie,{})})]})]},s._id||s.id)})}),I.length===0&&!b&&!y&&e.jsxs("div",{className:"no-projects",children:[e.jsx($,{size:48}),e.jsx("h3",{children:"No projects yet"}),e.jsx("p",{children:'Click "Add New Project" to add your first project'})]})]})};export{ue as default};
