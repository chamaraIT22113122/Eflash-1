import{r as o,j as e}from"./index-AdFfQu87.js";const g=()=>{const[a,d]=o.useState([]),[u,r]=o.useState(!1),[l,m]=o.useState({subject:"",content:"",recipients:"all"});o.useEffect(()=>{b()},[]);const b=()=>{const s=JSON.parse(localStorage.getItem("newsletter_subscribers")||"[]");d(s)},i=s=>{const{name:t,value:n}=s.target;m(c=>({...c,[t]:n}))},x=s=>{s.preventDefault();const t=l.recipients==="all"?a.map(n=>n.email):l.recipients.split(",").map(n=>n.trim());console.log("Sending newsletter to:",t),console.log("Subject:",l.subject),console.log("Content:",l.content),alert(`Newsletter would be sent to ${t.length} subscribers. (EmailJS integration pending)`),m({subject:"",content:"",recipients:"all"}),r(!1)},j=s=>{if(window.confirm(`Remove ${s} from newsletter?`)){const t=a.filter(n=>n.email!==s);localStorage.setItem("newsletter_subscribers",JSON.stringify(t)),d(t)}},p=()=>{const s=`Email,Date
`+a.map(h=>`${h.email},${h.date}`).join(`
`),t=new Blob([s],{type:"text/csv"}),n=window.URL.createObjectURL(t),c=document.createElement("a");c.href=n,c.download="newsletter-subscribers.csv",c.click()};return e.jsxs("div",{className:"admin-newsletter",children:[e.jsxs("div",{className:"admin-newsletter-header",children:[e.jsx("h1",{children:"Newsletter Management"}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn-compose",onClick:()=>r(!0),children:"✉️ Compose Newsletter"}),e.jsx("button",{className:"btn-export",onClick:p,children:"⬇️ Export Subscribers"})]})]}),e.jsxs("div",{className:"newsletter-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:a.length}),e.jsx("span",{className:"stat-label",children:"Total Subscribers"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:a.filter(s=>{const t=new Date(s.date),n=new Date;return n.setDate(n.getDate()-30),t>n}).length}),e.jsx("span",{className:"stat-label",children:"New (Last 30 Days)"})]})]}),u&&e.jsxs("div",{className:"compose-newsletter",children:[e.jsxs("div",{className:"compose-header",children:[e.jsx("h2",{children:"Compose Newsletter"}),e.jsx("button",{className:"btn-close",onClick:()=>r(!1),children:"×"})]}),e.jsxs("form",{onSubmit:x,className:"newsletter-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Recipients"}),e.jsxs("select",{name:"recipients",value:l.recipients,onChange:i,children:[e.jsxs("option",{value:"all",children:["All Subscribers (",a.length,")"]}),e.jsx("option",{value:"custom",children:"Custom List (comma-separated emails)"})]})]}),l.recipients==="custom"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Addresses (comma-separated)"}),e.jsx("textarea",{name:"recipients",value:l.recipients,onChange:i,placeholder:"email1@example.com, email2@example.com",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subject *"}),e.jsx("input",{type:"text",name:"subject",value:l.subject,onChange:i,required:!0,placeholder:"Newsletter subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content *"}),e.jsx("textarea",{name:"content",value:l.content,onChange:i,required:!0,placeholder:"Newsletter content (HTML supported)",rows:"12"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-send",children:"Send Newsletter"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>r(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"newsletter-note",children:[e.jsx("strong",{children:"Note:"})," EmailJS integration pending. Configure EmailJS service to send actual emails."]})]}),e.jsxs("div",{className:"subscribers-section",children:[e.jsx("h2",{children:"Subscribers List"}),a.length===0?e.jsx("div",{className:"no-subscribers",children:e.jsx("p",{children:"No subscribers yet."})}):e.jsx("div",{className:"subscribers-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Subscribed Date"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.email}),e.jsx("td",{children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{children:e.jsx("button",{className:"btn-unsubscribe",onClick:()=>j(s.email),children:"Remove"})})]},t))})]})})]})]})};export{g as default};
